# Generated by Django 3.2.25 on 2024-11-07 22:17

from django.db import migrations


def add_datasets_and_file_requirements(apps, schema_editor):
    Datasets = apps.get_model("api", "Datasets")
    FileRequirements = apps.get_model("api", "FileRequirements")
    columns_default_text = "All required columns must match the column names exactly as they appear in the provided template"
    formats_default_text = "File format should be xlsx. xlsm. only"

    ger_obj, ger_created = Datasets.objects.get_or_create(
        name="Go Electric Rebates Program", defaults={"update_user": "SYSTEM"}
    )
    FileRequirements.objects.get_or_create(
        dataset=ger_obj,
        defaults={
            "sheet": """
                The sheet name must be "Distribution List - Master"
                """,
            "columns": columns_default_text,
            "formats": formats_default_text,
        },
    )

    arc_obj, arc_created = Datasets.objects.get_or_create(
        name="ARC Project Tracking", defaults={"update_user": "SYSTEM"}
    )
    FileRequirements.objects.get_or_create(
        dataset=arc_obj,
        defaults={
            "sheet": """
                The sheet name must be "ARC Data"
                """,
            "columns": columns_default_text,
            "formats": formats_default_text,
        },
    )

    cvp_obj, cvp_created = Datasets.objects.get_or_create(
        name="CVP Data", defaults={"update_user": "SYSTEM"}
    )
    FileRequirements.objects.get_or_create(
        dataset=cvp_obj,
        defaults={
            "sheet": """
                The sheet name must be "Data"
                """,
            "columns": columns_default_text,
            "formats": formats_default_text,
        },
    )


class Migration(migrations.Migration):

    dependencies = [
        ("api", "0040_filerequirements"),
    ]

    operations = [
        migrations.RunPython(add_datasets_and_file_requirements),
    ]
